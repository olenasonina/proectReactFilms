{"ast":null,"code":"import React from\"react\";import{moviesData}from\"../moviesData\";import MovieItem from\"./MovieItem\";import MovieTab from\"./MovieTab\";import Pagination from\"./Pagination\";class App extends React.Component{constructor(){super();this.getMovies=()=>{fetch(\"https://api.themoviedb.org/3/discover/movie?api_key=3f4ca4f3a9750da53450646ced312397&language=en-US&sort_by=\".concat(this.state.sort_by,\"&page=\").concat(this.state.page)).then(response=>{return response.json();}).then(data=>{// console.log(\"data\", data);\nthis.setState({myMovies:data.results,total_pages:data.total_pages});});};this.removeMyMovie=myMovie=>{const newMovies=this.state.myMovies.filter(function(item){return item.id!==myMovie.id;});const newRemoveMovies=this.state.willWatch.filter(function(item){return item.id!==myMovie.id;});this.setState({myMovies:newMovies,willWatch:newRemoveMovies});};this.addMyMovie=myMovie=>{const newWillWatch=[...this.state.willWatch];newWillWatch.push(myMovie);this.setState({willWatch:newWillWatch});};this.removeMyMovieFromWillWatch=myMovie=>{const newRemoveMovies=this.state.willWatch.filter(function(item){return item.id!==myMovie.id;});this.setState({willWatch:newRemoveMovies});};this.changeSortBy=value=>{this.setState({sort_by:value});};this.changePageToPrevious=()=>{if(this.state.page!==1){const previousPage=this.state.page-1;this.setState({page:previousPage});}};this.changePageToNext=()=>{if(this.state.page!==500){const nextPage=this.state.page+1;this.setState({page:nextPage});}};this.state={myMovies:[],willWatch:[],sort_by:\"popularity.desc\",total_pages:\"\",page:1};}componentDidMount(){// fetch(\"http://cors-anywhere.herokuapp.com/\" + \"https://api.themoviedb.org/3/discover/movie?api_key=3f4ca4f3a9750da53450646ced312397&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1\")\nthis.getMovies();}componentDidUpdate(prevProps,prevState,snapshot){if(prevState.sort_by!==this.state.sort_by||prevState.page!==this.state.page){this.getMovies();window.scrollTo(0,0);}}render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-9\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MovieTab,{sort_by:this.state.sort_by,changeSortBy:this.changeSortBy}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.myMovies.map(myMovie=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 mb-4\",key:myMovie.id},/*#__PURE__*/React.createElement(MovieItem,{myMovie:myMovie,removeMyMovie:this.removeMyMovie,addMyMovie:this.addMyMovie,removeMyMovieFromWillWatch:this.removeMyMovieFromWillWatch}));})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-4 mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Pagination,{totalPages:this.state.total_pages,changePageToPrevious:this.changePageToPrevious,page:this.state.page,changePageToNext:this.changePageToNext})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"h2\"},\"Will watch: \",this.state.willWatch.length,\" movies\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group\"},this.state.willWatch.map(myMovie=>{return/*#__PURE__*/React.createElement(\"li\",{key:myMovie.id,className:\"list-group-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"p\",null,myMovie.title),/*#__PURE__*/React.createElement(\"p\",null,myMovie.vote_average)));})))));}}export default App;","map":{"version":3,"sources":["/home/sonin/hublena/proectReactFilms/src/components/App.js"],"names":["React","moviesData","MovieItem","MovieTab","Pagination","App","Component","constructor","getMovies","fetch","state","sort_by","page","then","response","json","data","setState","myMovies","results","total_pages","removeMyMovie","myMovie","newMovies","filter","item","id","newRemoveMovies","willWatch","addMyMovie","newWillWatch","push","removeMyMovieFromWillWatch","changeSortBy","value","changePageToPrevious","previousPage","changePageToNext","nextPage","componentDidMount","componentDidUpdate","prevProps","prevState","snapshot","window","scrollTo","render","map","length","title","vote_average"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,eAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CAIA,KAAMC,CAAAA,GAAN,QAAkBL,CAAAA,KAAK,CAACM,SAAU,CAChCC,WAAW,EAAG,CACZ,QADY,KAuBdC,SAvBc,CAuBF,IAAM,CAChBC,KAAK,uHAAgH,KAAKC,KAAL,CAAWC,OAA3H,kBAA2I,KAAKD,KAAL,CAAWE,IAAtJ,EAAL,CACKC,IADL,CACWC,QAAD,EAAc,CAClB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAHL,EAGOF,IAHP,CAGaG,IAAD,EAAU,CACpB;AACA,KAAKC,QAAL,CACI,CAACC,QAAQ,CAAEF,IAAI,CAACG,OAAhB,CACOC,WAAW,CAAEJ,IAAI,CAACI,WADzB,CADJ,EAID,CATD,EAUD,CAlCa,MAoCdC,aApCc,CAoCEC,OAAO,EAAI,CACzB,KAAMC,CAAAA,SAAS,CAAG,KAAKb,KAAL,CAAWQ,QAAX,CAAoBM,MAApB,CAA2B,SAASC,IAAT,CAAe,CACzD,MAAOA,CAAAA,IAAI,CAACC,EAAL,GAAYJ,OAAO,CAACI,EAA3B,CACF,CAFiB,CAAlB,CAGA,KAAMC,CAAAA,eAAe,CAAG,KAAKjB,KAAL,CAAWkB,SAAX,CAAqBJ,MAArB,CAA4B,SAASC,IAAT,CAAe,CACjE,MAAOA,CAAAA,IAAI,CAACC,EAAL,GAAYJ,OAAO,CAACI,EAA3B,CACD,CAFuB,CAAxB,CAGA,KAAKT,QAAL,CACE,CAACC,QAAQ,CAAEK,SAAX,CACOK,SAAS,CAAED,eADlB,CADF,EAID,CA/Ca,MAiDdE,UAjDc,CAiDDP,OAAO,EAAI,CACtB,KAAMQ,CAAAA,YAAY,CAAG,CAAC,GAAG,KAAKpB,KAAL,CAAWkB,SAAf,CAArB,CACAE,YAAY,CAACC,IAAb,CAAkBT,OAAlB,EACA,KAAKL,QAAL,CACI,CAACW,SAAS,CAAEE,YAAZ,CADJ,EAGD,CAvDa,MAyDdE,0BAzDc,CAyDeV,OAAO,EAAI,CACtC,KAAMK,CAAAA,eAAe,CAAG,KAAKjB,KAAL,CAAWkB,SAAX,CAAqBJ,MAArB,CAA4B,SAASC,IAAT,CAAe,CACjE,MAAOA,CAAAA,IAAI,CAACC,EAAL,GAAYJ,OAAO,CAACI,EAA3B,CACD,CAFuB,CAAxB,CAGA,KAAKT,QAAL,CACI,CAACW,SAAS,CAAED,eAAZ,CADJ,EAGD,CAhEa,MAkEdM,YAlEc,CAkECC,KAAK,EAAI,CAClB,KAAKjB,QAAL,CAAc,CAACN,OAAO,CAAEuB,KAAV,CAAd,EACL,CApEa,MAsEdC,oBAtEc,CAsES,IAAM,CAC3B,GAAG,KAAKzB,KAAL,CAAWE,IAAX,GAAoB,CAAvB,CAA0B,CACxB,KAAMwB,CAAAA,YAAY,CAAG,KAAK1B,KAAL,CAAWE,IAAX,CAAkB,CAAvC,CACA,KAAKK,QAAL,CAAc,CAACL,IAAI,CAAEwB,YAAP,CAAd,EACD,CACF,CA3Ea,MA6EdC,gBA7Ec,CA6EK,IAAM,CACvB,GAAG,KAAK3B,KAAL,CAAWE,IAAX,GAAoB,GAAvB,CAA4B,CAC1B,KAAM0B,CAAAA,QAAQ,CAAG,KAAK5B,KAAL,CAAWE,IAAX,CAAkB,CAAnC,CACA,KAAKK,QAAL,CAAc,CAACL,IAAI,CAAE0B,QAAP,CAAd,EACD,CACF,CAlFa,CAEZ,KAAK5B,KAAL,CAAa,CACXQ,QAAQ,CAAE,EADC,CAEXU,SAAS,CAAE,EAFA,CAGXjB,OAAO,CAAE,iBAHE,CAIXS,WAAW,CAAE,EAJF,CAKXR,IAAI,CAAE,CALK,CAAb,CAOD,CAED2B,iBAAiB,EAAG,CAClB;AACA,KAAK/B,SAAL,GACD,CAEDgC,kBAAkB,CAACC,SAAD,CAAYC,SAAZ,CAAuBC,QAAvB,CAAiC,CACjD,GAAID,SAAS,CAAC/B,OAAV,GAAsB,KAAKD,KAAL,CAAWC,OAAlC,EAA+C+B,SAAS,CAAC9B,IAAV,GAAmB,KAAKF,KAAL,CAAWE,IAAhF,CAAuF,CACrF,KAAKJ,SAAL,GACAoC,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACD,CACF,CA+DDC,MAAM,EAAG,CACT,mBACI,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,QAAD,EAAU,OAAO,CAAE,KAAKpC,KAAL,CAAWC,OAA9B,CAAuC,YAAY,CAAE,KAAKsB,YAA1D,EADF,CADF,CADF,cAME,2BAAK,SAAS,CAAC,KAAf,EACG,KAAKvB,KAAL,CAAWQ,QAAX,CAAoB6B,GAApB,CAAyBzB,OAAO,EAAI,CACnC,mBACI,2BAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEA,OAAO,CAACI,EAAzC,eACI,oBAAC,SAAD,EAAW,OAAO,CAAEJ,OAApB,CAA6B,aAAa,CAAE,KAAKD,aAAjD,CAAgE,UAAU,CAAE,KAAKQ,UAAjF,CAA6F,0BAA0B,CAAE,KAAKG,0BAA9H,EADJ,CADJ,CAKD,CANA,CADH,CANF,cAeE,2BAAK,SAAS,CAAC,eAAf,eACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,UAAD,EAAY,UAAU,CAAE,KAAKtB,KAAL,CAAWU,WAAnC,CAAgD,oBAAoB,CAAE,KAAKe,oBAA3E,CAAiG,IAAI,CAAE,KAAKzB,KAAL,CAAWE,IAAlH,CAAwH,gBAAgB,CAAE,KAAKyB,gBAA/I,EADF,CADF,CAfF,CADF,cAsBE,2BAAK,SAAS,CAAC,OAAf,eACE,yBAAG,SAAS,CAAC,IAAb,iBAA+B,KAAK3B,KAAL,CAAWkB,SAAX,CAAqBoB,MAApD,WADF,cAEE,0BAAI,SAAS,CAAC,YAAd,EACC,KAAKtC,KAAL,CAAWkB,SAAX,CAAqBmB,GAArB,CAA0BzB,OAAO,EAAI,CACpC,mBACI,0BAAI,GAAG,CAAEA,OAAO,CAACI,EAAjB,CAAqB,SAAS,CAAC,iBAA/B,eACE,2BAAK,SAAS,CAAC,gCAAf,eACE,6BAAIJ,OAAO,CAAC2B,KAAZ,CADF,cAEE,6BAAI3B,OAAO,CAAC4B,YAAZ,CAFF,CADF,CADJ,CAQD,CATA,CADD,CAFF,CAtBF,CADF,CADJ,CA2CC,CAjI+B,CAoIlC,cAAe7C,CAAAA,GAAf","sourcesContent":["import React from \"react\";\nimport { moviesData } from \"../moviesData\";\nimport MovieItem from \"./MovieItem\";\nimport MovieTab from \"./MovieTab\";\nimport Pagination from \"./Pagination\";\n\n\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      myMovies: [],\n      willWatch: [],\n      sort_by: \"popularity.desc\",\n      total_pages: \"\",\n      page: 1\n    }\n  }\n\n  componentDidMount() {\n    // fetch(\"http://cors-anywhere.herokuapp.com/\" + \"https://api.themoviedb.org/3/discover/movie?api_key=3f4ca4f3a9750da53450646ced312397&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1\")\n    this.getMovies();\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if((prevState.sort_by !== this.state.sort_by) || (prevState.page !== this.state.page)) {\n      this.getMovies();\n      window.scrollTo(0, 0);\n    }\n  };\n\n  getMovies = () => {\n    fetch(`https://api.themoviedb.org/3/discover/movie?api_key=3f4ca4f3a9750da53450646ced312397&language=en-US&sort_by=${this.state.sort_by}&page=${this.state.page}`)\n        .then((response) => {\n          return response.json()\n        }).then((data) => {\n      // console.log(\"data\", data);\n      this.setState(\n          {myMovies: data.results,\n                 total_pages: data.total_pages}\n      );\n    });\n  };\n\n  removeMyMovie = myMovie => {\n    const newMovies = this.state.myMovies.filter(function(item) {\n       return item.id !== myMovie.id;\n    });\n    const newRemoveMovies = this.state.willWatch.filter(function(item) {\n      return item.id !== myMovie.id;\n    });\n    this.setState(\n      {myMovies: newMovies,\n             willWatch: newRemoveMovies}\n    );\n  };\n\n  addMyMovie = myMovie => {\n    const newWillWatch = [...this.state.willWatch];\n    newWillWatch.push(myMovie);\n    this.setState(\n        {willWatch: newWillWatch}\n        );\n  };\n\n  removeMyMovieFromWillWatch = myMovie => {\n    const newRemoveMovies = this.state.willWatch.filter(function(item) {\n      return item.id !== myMovie.id;\n    });\n    this.setState(\n        {willWatch: newRemoveMovies}\n    );\n  };\n\n  changeSortBy = value => {\n        this.setState({sort_by: value});\n  };\n\n  changePageToPrevious = () => {\n    if(this.state.page !== 1) {\n      const previousPage = this.state.page - 1;\n      this.setState({page: previousPage});\n    }\n  };\n\n  changePageToNext = () => {\n    if(this.state.page !== 500) {\n      const nextPage = this.state.page + 1;\n      this.setState({page: nextPage});\n    }\n  };\n\n  render() {\n  return (\n      <div className=\"container\">\n        <div className=\"row mt-4\">\n          <div className=\"col-9\">\n            <div className=\"row mb-4\">\n              <div className=\"col-12\">\n                <MovieTab sort_by={this.state.sort_by} changeSortBy={this.changeSortBy} />\n              </div>\n            </div>\n            <div className=\"row\">\n              {this.state.myMovies.map( myMovie => {\n                return(\n                    <div className=\"col-6 mb-4\" key={myMovie.id}>\n                        <MovieItem myMovie={myMovie} removeMyMovie={this.removeMyMovie} addMyMovie={this.addMyMovie} removeMyMovieFromWillWatch={this.removeMyMovieFromWillWatch} />\n                    </div>\n                    );\n              })}\n            </div>\n            <div className=\"row mb-4 mt-4\">\n              <div className=\"col-12\">\n                <Pagination totalPages={this.state.total_pages} changePageToPrevious={this.changePageToPrevious} page={this.state.page} changePageToNext={this.changePageToNext} />\n              </div>\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <p className=\"h2\">Will watch: {this.state.willWatch.length} movies</p>\n            <ul className=\"list-group\">\n            {this.state.willWatch.map( myMovie => {\n              return (\n                  <li key={myMovie.id} className=\"list-group-item\">\n                    <div className=\"d-flex justify-content-between\">\n                      <p>{myMovie.title}</p>\n                      <p>{myMovie.vote_average}</p>\n                    </div>\n                  </li>\n              )\n            })}\n            </ul>\n          </div>\n        </div>\n      </div>\n\n  )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}